---
import { marked } from 'marked'
import db from '@/db'
import SiteLayout from '@/layouts/SiteLayout.astro'
import Carousel from '@/components/Carousel'
import Input from '@/components/Input.astro'
import Button from '@/components/Button.astro'
import Steps from '@/components/Steps.astro'
import Promotions from '@/components/Promotions.astro'

interface Data {
  slides: Slide[]
  formContent: string
  steps: Steps
}

const { slides, formContent, steps } = db.get<Data>('inicio')!
---

<SiteLayout sticky>
  <div class="relative overflow-hidden">
    <Carousel slides={slides} client:media="(min-width: 640px)" />
    <section
      class:list={[
        'relative m-5 p-8 bg-neutral rounded-3xl text-primary',
        '[&_strong]:font-extrabold [&_strong]:text-[2.5rem]/[1]',
        'sm:max-w-[21rem] sm:ml-auto sm:mr-10 xl:mr-15'
      ]}
    >
      <h2 class="mb-4 leading-none">Solicitá efectivo</h2>
      <Fragment set:html={marked.parse(formContent, { breaks: true })} />
      <form class="mt-11 font-manrope">
        <Input type="number" placeholder="Cédula (sin puntos ni guiones)" />
        <Input
          class="mt-3 text-warning border-warning outline-warning"
          type="number"
          placeholder="Celular"
        />
        <label
          class:list={[
            'mt-5 mb-9 grid grid-flow-col gap-x-2 text-[0.625rem]',
            'text-primary/90'
          ]}
        >
          <input
            class:list={[
              'mt-0.5 appearance-none size-3 bg-contain border border-primary',
              'rounded checked:bg-[url(/icons/check.svg)]'
            ]}
            type="checkbox"
          />
          <span>
            Leí y acepto los <a
              class="inline-flex font-medium underline hover:opacity-90"
              href="/terminos-y-condiciones"
            >
              Términos y Condiciones
            </a> y
            <a
              class="inline-flex font-medium underline hover:opacity-90"
              href="/politica-de-privacidad"
            >
              Política de Privacidad
            </a>. Sujeto a aprobación política
          </span>
        </label>
        <Button>Solicitar efectivo</Button>
      </form>
    </section>
  </div>
  <Steps {...steps} />
  <section class="my-28 text-center xl:my-32">
    <h2 class="mx-5 text-3xl sm:text-[2.5rem]/normal">
      Conocé nuestras <strong class="font-extrabold text-secondary">
        promociones
      </strong>
    </h2>
    <Promotions class="mt-14" limit={3} />
  </section>
</SiteLayout>
